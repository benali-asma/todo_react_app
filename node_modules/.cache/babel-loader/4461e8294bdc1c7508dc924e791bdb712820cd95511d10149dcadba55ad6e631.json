{"ast":null,"code":"import { useLayoutEffect as e } from \"@radix-ui/react-use-layout-effect\";\nimport { useComposedRefs as n } from \"@radix-ui/react-compose-refs\";\nimport * as t from \"react\";\nexport const Presence = u => {\n  const {\n      present: o,\n      children: i\n    } = u,\n    s = function (n) {\n      const [u, o] = t.useState(),\n        i = t.useRef({}),\n        s = t.useRef(n),\n        c = t.useRef(\"none\"),\n        a = n ? \"mounted\" : \"unmounted\",\n        [d, m] = function (e, n) {\n          return t.useReducer((e, t) => {\n            const r = n[e][t];\n            return null != r ? r : e;\n          }, e);\n        }(a, {\n          mounted: {\n            UNMOUNT: \"unmounted\",\n            ANIMATION_OUT: \"unmountSuspended\"\n          },\n          unmountSuspended: {\n            MOUNT: \"mounted\",\n            ANIMATION_END: \"unmounted\"\n          },\n          unmounted: {\n            MOUNT: \"mounted\"\n          }\n        });\n      return t.useEffect(() => {\n        const e = r(i.current);\n        c.current = \"mounted\" === d ? e : \"none\";\n      }, [d]), e(() => {\n        const e = i.current,\n          t = s.current;\n        if (t !== n) {\n          const u = c.current,\n            o = r(e);\n          if (n) m(\"MOUNT\");else if (\"none\" === o || \"none\" === (null == e ? void 0 : e.display)) m(\"UNMOUNT\");else {\n            const e = u !== o;\n            m(t && e ? \"ANIMATION_OUT\" : \"UNMOUNT\");\n          }\n          s.current = n;\n        }\n      }, [n, m]), e(() => {\n        if (u) {\n          const e = e => {\n              const n = r(i.current).includes(e.animationName);\n              e.target === u && n && m(\"ANIMATION_END\");\n            },\n            n = e => {\n              e.target === u && (c.current = r(i.current));\n            };\n          return u.addEventListener(\"animationstart\", n), u.addEventListener(\"animationcancel\", e), u.addEventListener(\"animationend\", e), () => {\n            u.removeEventListener(\"animationstart\", n), u.removeEventListener(\"animationcancel\", e), u.removeEventListener(\"animationend\", e);\n          };\n        }\n        m(\"ANIMATION_END\");\n      }, [u, m]), {\n        isPresent: [\"mounted\", \"unmountSuspended\"].includes(d),\n        ref: t.useCallback(e => {\n          e && (i.current = getComputedStyle(e)), o(e);\n        }, [])\n      };\n    }(o),\n    c = \"function\" == typeof i ? i({\n      present: s.isPresent\n    }) : t.Children.only(i),\n    a = n(s.ref, c.ref);\n  return \"function\" == typeof i || s.isPresent ? /*#__PURE__*/t.cloneElement(c, {\n    ref: a\n  }) : null;\n};\nfunction r(e) {\n  return (null == e ? void 0 : e.animationName) || \"none\";\n}\nPresence.displayName = \"Presence\";","map":{"version":3,"names":["Presence","u","present","o","children","i","s","n","t","useState","useRef","c","a","d","m","e","useReducer","r","mounted","UNMOUNT","ANIMATION_OUT","unmountSuspended","MOUNT","ANIMATION_END","unmounted","useEffect","current","display","includes","animationName","target","addEventListener","removeEventListener","isPresent","ref","useCallback","getComputedStyle","Children","only","cloneElement","displayName"],"sources":["C:\\Users\\asma1\\OneDrive\\Bureau\\react\\todo_react_app\\node_modules\\@radix-ui\\react-presence\\dist\\packages\\react\\presence\\src\\Presence.tsx","C:\\Users\\asma1\\OneDrive\\Bureau\\react\\todo_react_app\\node_modules\\@radix-ui\\react-presence\\dist\\packages\\react\\presence\\src\\useStateMachine.tsx"],"sourcesContent":["import * as React from 'react';\nimport { useComposedRefs } from '@radix-ui/react-compose-refs';\nimport { useLayoutEffect } from '@radix-ui/react-use-layout-effect';\nimport { useStateMachine } from './useStateMachine';\n\ninterface PresenceProps {\n  present: boolean;\n  children: React.ReactElement | ((props: { present: boolean }) => React.ReactElement);\n}\n\nconst Presence: React.FC<PresenceProps> = (props) => {\n  const { present, children } = props;\n  const presence = usePresence(present);\n\n  const child = (\n    typeof children === 'function'\n      ? children({ present: presence.isPresent })\n      : React.Children.only(children)\n  ) as React.ReactElement;\n\n  const ref = useComposedRefs(presence.ref, (child as any).ref);\n  const forceMount = typeof children === 'function';\n  return forceMount || presence.isPresent ? React.cloneElement(child, { ref }) : null;\n};\n\nPresence.displayName = 'Presence';\n\n/* -------------------------------------------------------------------------------------------------\n * usePresence\n * -----------------------------------------------------------------------------------------------*/\n\nfunction usePresence(present: boolean) {\n  const [node, setNode] = React.useState<HTMLElement>();\n  const stylesRef = React.useRef<CSSStyleDeclaration>({} as any);\n  const prevPresentRef = React.useRef(present);\n  const prevAnimationNameRef = React.useRef<string>('none');\n  const initialState = present ? 'mounted' : 'unmounted';\n  const [state, send] = useStateMachine(initialState, {\n    mounted: {\n      UNMOUNT: 'unmounted',\n      ANIMATION_OUT: 'unmountSuspended',\n    },\n    unmountSuspended: {\n      MOUNT: 'mounted',\n      ANIMATION_END: 'unmounted',\n    },\n    unmounted: {\n      MOUNT: 'mounted',\n    },\n  });\n\n  React.useEffect(() => {\n    const currentAnimationName = getAnimationName(stylesRef.current);\n    prevAnimationNameRef.current = state === 'mounted' ? currentAnimationName : 'none';\n  }, [state]);\n\n  useLayoutEffect(() => {\n    const styles = stylesRef.current;\n    const wasPresent = prevPresentRef.current;\n    const hasPresentChanged = wasPresent !== present;\n\n    if (hasPresentChanged) {\n      const prevAnimationName = prevAnimationNameRef.current;\n      const currentAnimationName = getAnimationName(styles);\n\n      if (present) {\n        send('MOUNT');\n      } else if (currentAnimationName === 'none' || styles?.display === 'none') {\n        // If there is no exit animation or the element is hidden, animations won't run\n        // so we unmount instantly\n        send('UNMOUNT');\n      } else {\n        /**\n         * When `present` changes to `false`, we check changes to animation-name to\n         * determine whether an animation has started. We chose this approach (reading\n         * computed styles) because there is no `animationrun` event and `animationstart`\n         * fires after `animation-delay` has expired which would be too late.\n         */\n        const isAnimating = prevAnimationName !== currentAnimationName;\n\n        if (wasPresent && isAnimating) {\n          send('ANIMATION_OUT');\n        } else {\n          send('UNMOUNT');\n        }\n      }\n\n      prevPresentRef.current = present;\n    }\n  }, [present, send]);\n\n  useLayoutEffect(() => {\n    if (node) {\n      /**\n       * Triggering an ANIMATION_OUT during an ANIMATION_IN will fire an `animationcancel`\n       * event for ANIMATION_IN after we have entered `unmountSuspended` state. So, we\n       * make sure we only trigger ANIMATION_END for the currently active animation.\n       */\n      const handleAnimationEnd = (event: AnimationEvent) => {\n        const currentAnimationName = getAnimationName(stylesRef.current);\n        const isCurrentAnimation = currentAnimationName.includes(event.animationName);\n        if (event.target === node && isCurrentAnimation) {\n          send('ANIMATION_END');\n        }\n      };\n      const handleAnimationStart = (event: AnimationEvent) => {\n        if (event.target === node) {\n          // if animation occurred, store its name as the previous animation.\n          prevAnimationNameRef.current = getAnimationName(stylesRef.current);\n        }\n      };\n      node.addEventListener('animationstart', handleAnimationStart);\n      node.addEventListener('animationcancel', handleAnimationEnd);\n      node.addEventListener('animationend', handleAnimationEnd);\n      return () => {\n        node.removeEventListener('animationstart', handleAnimationStart);\n        node.removeEventListener('animationcancel', handleAnimationEnd);\n        node.removeEventListener('animationend', handleAnimationEnd);\n      };\n    } else {\n      // Transition to the unmounted state if the node is removed prematurely.\n      // We avoid doing so during cleanup as the node may change but still exist.\n      send('ANIMATION_END');\n    }\n  }, [node, send]);\n\n  return {\n    isPresent: ['mounted', 'unmountSuspended'].includes(state),\n    ref: React.useCallback((node: HTMLElement) => {\n      if (node) stylesRef.current = getComputedStyle(node);\n      setNode(node);\n    }, []),\n  };\n}\n\n/* -----------------------------------------------------------------------------------------------*/\n\nfunction getAnimationName(styles?: CSSStyleDeclaration) {\n  return styles?.animationName || 'none';\n}\n\nexport { Presence };\nexport type { PresenceProps };\n","import * as React from 'react';\n\ntype Machine<S> = { [k: string]: { [k: string]: S } };\ntype MachineState<T> = keyof T;\ntype MachineEvent<T> = keyof UnionToIntersection<T[keyof T]>;\n\n// ðŸ¤¯ https://fettblog.eu/typescript-union-to-intersection/\ntype UnionToIntersection<T> = (T extends any ? (x: T) => any : never) extends (x: infer R) => any\n  ? R\n  : never;\n\nexport function useStateMachine<M>(\n  initialState: MachineState<M>,\n  machine: M & Machine<MachineState<M>>\n) {\n  return React.useReducer((state: MachineState<M>, event: MachineEvent<M>): MachineState<M> => {\n    const nextState = (machine[state] as any)[event];\n    return nextState ?? state;\n  }, initialState);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}